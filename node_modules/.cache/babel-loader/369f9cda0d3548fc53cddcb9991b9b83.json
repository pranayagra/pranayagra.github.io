{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"C:/Users/prana/OneDrive/Desktop/Misc/officialwebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _slicedToArray = require(\"C:/Users/prana/OneDrive/Desktop/Misc/officialwebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _objectWithoutProperties = require(\"C:/Users/prana/OneDrive/Desktop/Misc/officialwebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _asyncToGenerator = require(\"C:/Users/prana/OneDrive/Desktop/Misc/officialwebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _excluded = [\"username\", \"year\", \"labels\", \"transformData\", \"transformTotalCount\"];\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar Calendar = require('react-activity-calendar');\n\nfunction _interopDefault(e) {\n  return e && e.__esModule ? e : {\n    default: e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefault(React);\n\nvar Calendar__default = /*#__PURE__*/_interopDefault(Calendar);\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n} // GitHub theme\n\n\nvar API_URL = 'https://github-contributions-api.jogruber.de/v4/';\nvar DEFAULT_THEME = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0'\n}; // noinspection SuspiciousTypeOfGuard The caller might not use TypeScript\n\nvar transformData = function transformData(data, transformFn) {\n  if (typeof transformFn !== 'function') {\n    return data;\n  }\n\n  var transformedData = transformFn(data);\n\n  if (!Array.isArray(transformedData)) {\n    throw new Error(\"Passed function transformData must return a list of Day objects.\");\n  }\n\n  if (transformedData.length > 0) {\n    var testObj = transformedData[0];\n\n    if (typeof testObj.count !== 'number' || testObj.count < 0) {\n      throw new Error(\"Required property \\\"count: number\\\" missing or invalid. Got: \".concat(testObj.count));\n    }\n\n    if (!/\\d{4}-\\d{2}-\\d{2}/.test(testObj.date)) {\n      throw new Error(\"Required property \\\"date: YYYY-MM-DD\\\" missing or invalid. Got: \".concat(testObj.date));\n    }\n\n    if (typeof testObj.level !== 'number' || testObj.level < 0 || testObj.level > 4) {\n      throw new Error(\"Required property \\\"level: 0 | 1 | 2 | 3 | 4\\\" missing or invalid: Got: \".concat(testObj.level, \".\"));\n    }\n  }\n\n  return transformedData;\n};\n\nfunction fetchCalendarData(_x, _x2) {\n  return _fetchCalendarData.apply(this, arguments);\n}\n\nfunction _fetchCalendarData() {\n  _fetchCalendarData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username, year) {\n    var response, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"\".concat(API_URL).concat(username, \"?y=\").concat(year));\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.json();\n\n          case 5:\n            data = _context.sent;\n\n            if (response.ok) {\n              _context.next = 8;\n              break;\n            }\n\n            throw new Error(data.error);\n\n          case 8:\n            return _context.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchCalendarData.apply(this, arguments);\n}\n\nvar GitHubCalendar = function GitHubCalendar(_ref) {\n  var _props$theme;\n\n  var username = _ref.username,\n      _ref$year = _ref.year,\n      year = _ref$year === void 0 ? 'last' : _ref$year,\n      labels = _ref.labels,\n      transformDataProp = _ref.transformData,\n      _ref$transformTotalCo = _ref.transformTotalCount,\n      transformTotalCount = _ref$transformTotalCo === void 0 ? true : _ref$transformTotalCo,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      data = _React$useState2[0],\n      setData = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      error = _React$useState6[0],\n      setError = _React$useState6[1];\n\n  var fetchData = React.useCallback(function () {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year).then(function (_ref2) {\n      var contributions = _ref2.contributions;\n      return setData(contributions);\n    }).catch(setError).finally(function () {\n      return setLoading(false);\n    });\n  }, [username, year]);\n  React.useEffect(fetchData, [fetchData]);\n\n  if (error) {\n    return /*#__PURE__*/React__default.default.createElement(\"div\", null, /*#__PURE__*/React__default.default.createElement(\"i\", null, \"Unable to fetch contribution data. See console.\"));\n  }\n\n  if (loading || !data) {\n    return /*#__PURE__*/React__default.default.createElement(Calendar.Skeleton, _extends({}, props, {\n      loading: true\n    }));\n  }\n\n  var theme = props.color ? undefined : (_props$theme = props.theme) !== null && _props$theme !== void 0 ? _props$theme : DEFAULT_THEME;\n  var defaultLabels = {\n    totalCount: \"{{count}} contributions in \".concat(year === 'last' ? 'the last year' : '{{year}}')\n  };\n  var totalCount = transformTotalCount ? undefined : data.reduce(function (sum, day) {\n    return sum + day.count;\n  }, 0);\n  return /*#__PURE__*/React__default.default.createElement(Calendar__default.default, _extends({\n    data: transformData(data, transformDataProp),\n    theme: theme,\n    labels: Object.assign({}, defaultLabels, labels),\n    totalCount: totalCount\n  }, props));\n};\n\nObject.defineProperty(exports, 'createCalendarTheme', {\n  enumerable: true,\n  get: function get() {\n    return Calendar.createCalendarTheme;\n  }\n});\nexports.default = GitHubCalendar;","map":{"version":3,"sources":["../src/constants.ts","../src/utils.ts","../src/index.tsx"],"names":["API_URL","DEFAULT_THEME","level4","level3","level2","level1","level0","transformData","data","transformFn","transformedData","Array","isArray","Error","length","testObj","count","test","date","level","fetchCalendarData","username","year","response","fetch","json","ok","error","GitHubCalendar","labels","transformDataProp","transformTotalCount","props","setData","useState","loading","setLoading","setError","fetchData","useCallback","then","contributions","catch","finally","useEffect","React","Skeleton","theme","color","undefined","defaultLabels","totalCount","reduce","sum","day","Calendar","Object","assign"],"mappings":"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","sourcesContent":["// GitHub theme\nimport { Theme } from 'react-activity-calendar';\n\nexport const API_URL = 'https://github-contributions-api.jogruber.de/v4/';\n\nexport const DEFAULT_THEME: Theme = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0',\n};\n","// noinspection SuspiciousTypeOfGuard The caller might not use TypeScript\n\nimport { CalendarData } from 'react-activity-calendar';\n\nimport { Props } from './index';\n\nexport const transformData = (\n  data: CalendarData,\n  transformFn?: Props['transformData'],\n): CalendarData => {\n  if (typeof transformFn !== 'function') {\n    return data;\n  }\n\n  const transformedData = transformFn(data);\n\n  if (!Array.isArray(transformedData)) {\n    throw new Error(`Passed function transformData must return a list of Day objects.`);\n  }\n\n  if (transformedData.length > 0) {\n    const testObj = transformedData[0];\n\n    if (typeof testObj.count !== 'number' || testObj.count < 0) {\n      throw new Error(\n        `Required property \"count: number\" missing or invalid. Got: ${testObj.count}`,\n      );\n    }\n\n    if (!/\\d{4}-\\d{2}-\\d{2}/.test(testObj.date)) {\n      throw new Error(\n        `Required property \"date: YYYY-MM-DD\" missing or invalid. Got: ${testObj.date}`,\n      );\n    }\n\n    if (typeof testObj.level !== 'number' || testObj.level < 0 || testObj.level > 4) {\n      throw new Error(\n        `Required property \"level: 0 | 1 | 2 | 3 | 4\" missing or invalid: Got: ${testObj.level}.`,\n      );\n    }\n  }\n\n  return transformedData;\n};\n","import React, { FunctionComponent, useCallback, useEffect, useState } from 'react';\nimport Calendar, {\n  createCalendarTheme,\n  Skeleton,\n  type CalendarData,\n  type Props as CalendarProps,\n} from 'react-activity-calendar';\n\nimport { API_URL, DEFAULT_THEME } from './constants';\nimport { ApiErrorResponse, ApiResponse, Year } from './types';\nimport { transformData } from './utils';\n\nexport interface Props extends Omit<CalendarProps, 'data'> {\n  username: string;\n  year?: Year;\n  transformData?: (data: CalendarData) => CalendarData;\n  transformTotalCount?: boolean;\n}\n\nasync function fetchCalendarData(username: string, year: Year): Promise<ApiResponse> {\n  const response = await fetch(`${API_URL}${username}?y=${year}`);\n  const data: ApiResponse | ApiErrorResponse = await response.json();\n\n  if (!response.ok) {\n    throw new Error((data as ApiErrorResponse).error);\n  }\n\n  return data as ApiResponse;\n}\n\nconst GitHubCalendar: FunctionComponent<Props> = ({\n  username,\n  year = 'last',\n  labels,\n  transformData: transformDataProp,\n  transformTotalCount = true,\n  ...props\n}) => {\n  const [data, setData] = useState<CalendarData | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year)\n      .then(({ contributions }) => setData(contributions))\n      .catch(setError)\n      .finally(() => setLoading(false));\n  }, [username, year]);\n\n  useEffect(fetchData, [fetchData]);\n\n  if (error) {\n    return (\n      <div>\n        <i>Unable to fetch contribution data. See console.</i>\n      </div>\n    );\n  }\n\n  if (loading || !data) {\n    return <Skeleton {...props} loading />;\n  }\n\n  const theme = props.color ? undefined : props.theme ?? DEFAULT_THEME;\n\n  const defaultLabels = {\n    totalCount: `{{count}} contributions in ${year === 'last' ? 'the last year' : '{{year}}'}`,\n  };\n\n  const totalCount = transformTotalCount\n    ? undefined\n    : data.reduce((sum, day) => sum + day.count, 0);\n\n  return (\n    <Calendar\n      data={transformData(data, transformDataProp)}\n      theme={theme}\n      labels={Object.assign({}, defaultLabels, labels)}\n      totalCount={totalCount}\n      {...props}\n    />\n  );\n};\n\nexport { createCalendarTheme };\nexport default GitHubCalendar;\n"]},"metadata":{},"sourceType":"script"}